#ifndef ceammc_rust_proto_h
#define ceammc_rust_proto_h

/* Warning, this file is autogenerated by cbindgen. Don't modify this manually. */

#include <cstdint>
#include <cstddef>


struct ceammc_obs_client;

struct ceammc_obs_scene;

struct ceammc_obs_scene_list;

struct ceammc_obs_version;

struct ceammc_obs_init {
    const char *host;
    const char *password;
    uint16_t port;
};

struct ceammc_callback_msg {
    void *user;
    void (*cb)(void *user, const char *msg);
};

struct ceammc_obs_data_monitor {
    uint32_t index;
    uint16_t w;
    uint16_t h;
    uint16_t x;
    uint16_t y;
    const char *name;
};

struct ceammc_obs_result_cb {
    /// user data pointer (can be NULL)
    void *user;
    /// version data callback function (can be NULL)
    void (*cb_version)(void *user, const ceammc_obs_version *ver);
    /// scenes data callback function (can be NULL)
    void (*cb_scenes)(void *user, const ceammc_obs_scene_list *scenes);
    /// monitors data callback function (can be NULL)
    void (*cb_monitors)(void *user, const ceammc_obs_data_monitor *mons, size_t len);
    void (*cb_current_scene)(void *user, const char *name);
    /// connected/disconnected callback function (can be NULL)
    void (*cb_connected)(void *user, bool state);
};

struct ceammc_callback_notify {
    size_t id;
    void (*cb)(size_t id);
};


extern "C" {

/// create new empty OBS scene
/// @param cli - pointer to obs client
/// @param name - scene name
/// @return true on success, false on error
bool ceammc_obs_create_scene(const ceammc_obs_client *cli, const char *name);

/// change to first OBS scene
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_first_scene(const ceammc_obs_client *cli);

/// free OBS Studio client
/// @param cli - pointer to obs client
void ceammc_obs_free(ceammc_obs_client *cli);

/// get current OBS scene
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_get_current_scene(const ceammc_obs_client *cli);

/// send version request to OBS studio
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_get_version(const ceammc_obs_client *cli);

/// change to last OBS scene
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_last_scene(const ceammc_obs_client *cli);

/// request list of OBS studio monitors
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_list_monitors(const ceammc_obs_client *cli);

/// send version request to OBS studio
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_list_scenes(const ceammc_obs_client *cli);

/// create OSB Studio client
/// @param params - connection params
/// @param cb_err - callback for error messages
/// @param cb_post - callback for post messages
/// @param cb_debug - callback for debug messages
/// @param cb_log - callback for log messages
/// @param cb_reply - reply callbacks
/// @param cb_notify - notification callback
/// @return pointer to obs client or NULL on error
ceammc_obs_client *ceammc_obs_new(ceammc_obs_init params,
                                  ceammc_callback_msg cb_err,
                                  ceammc_callback_msg cb_post,
                                  ceammc_callback_msg cb_debug,
                                  ceammc_callback_msg cb_log,
                                  ceammc_obs_result_cb cb_reply,
                                  ceammc_callback_notify cb_notify);

/// move to next OBS scene
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_next_scene(const ceammc_obs_client *cli);

/// move to previous OBS scene
/// @param cli - pointer to obs client
/// @return true on success, false on error
bool ceammc_obs_prev_scene(const ceammc_obs_client *cli);

/// process all available results from OBS studio
/// @param cli - pointer to obs client client
/// @return true on success, false on error
bool ceammc_obs_process_events(ceammc_obs_client *cli);

/// remove OBS scene
/// @param cli - pointer to obs client
/// @param name - scene name
/// @return true on success, false on error
bool ceammc_obs_remove_scene(const ceammc_obs_client *cli, const char *name);

/// get current scene
/// @param scenes - pointer to scenes (not NULL!)
const ceammc_obs_scene *ceammc_obs_scene_current(const ceammc_obs_scene_list *scl);

/// get scene list data
/// @param scenes - pointer to scenes (not NULL!)
const ceammc_obs_scene *ceammc_obs_scene_list_at(const ceammc_obs_scene_list *scl, size_t idx);

/// get scene list length
/// @param scenes - pointer to scenes (not NULL!)
size_t ceammc_obs_scene_list_length(const ceammc_obs_scene_list *scl);

/// get scene name as C-string
/// @param scene - pointer to scene (not NULL!)
const char *ceammc_obs_scene_name(const ceammc_obs_scene *scene);

/// get scene UUID as C-string
/// @param scene - pointer to scene (not NULL!)
const char *ceammc_obs_scene_uuid(const ceammc_obs_scene *scene);

/// set current scene
/// @param cli - pointer to obs client
/// @param name - scene name
/// @return true on success, false on error
bool ceammc_obs_set_current_scene(ceammc_obs_client *cli, const char *name);

/// get OBS image format at
/// @param v - pointer to version struct
/// @param idx - image format index
const char *ceammc_obs_version_image_fmt_at(const ceammc_obs_version *v, size_t idx);

/// get OBS image format count
/// @param v - pointer to version struct
size_t ceammc_obs_version_image_fmt_num(const ceammc_obs_version *v);

/// get OBS platform
/// @param v - pointer to version struct
const char *ceammc_obs_version_platform(const ceammc_obs_version *v);

/// get OBS platform description
/// @param v - pointer to version struct
const char *ceammc_obs_version_platform_desc(const ceammc_obs_version *v);

/// get RPC OBS version
/// @param v - pointer to version struct
uint32_t ceammc_obs_version_rpc(const ceammc_obs_version *v);

/// get OBS version
/// @param v - pointer to version struct
/// @param major - pointer to store major version data
/// @param minor - pointer to store minor version data
/// @param patch - pointer to store patch version data
void ceammc_obs_version_server(const ceammc_obs_version *v,
                               uint64_t *major,
                               uint64_t *minor,
                               uint64_t *patch);

/// get OBS Web Socket version
/// @param v - pointer to version struct
/// @param major - pointer to store major version data
/// @param minor - pointer to store minor version data
/// @param patch - pointer to store patch version data
void ceammc_obs_version_websocket(const ceammc_obs_version *v,
                                  uint64_t *major,
                                  uint64_t *minor,
                                  uint64_t *patch);

/// init rust env_logger
/// logger config is done with a RUST_LOG env variable
void ceammc_proto_log_init();

} // extern "C"

#endif // ceammc_rust_proto_h
